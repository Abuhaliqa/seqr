"use strict";(self.webpackChunkseqr=self.webpackChunkseqr||[]).push([[22],{73022:function(t,e,s){function a(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function o(t,e){return fetch(t,e).then(a)}s.d(e,{u:function(){return nt}});var n=s(65351),i=s(56070),r=s(5130);var l=s(6939);var c=s(66944),u=s(64361),p=s(45902),d=s(50352),h=s(42274),f=s(3839),g=s(14827),b=s(40565),v=s(92992),x=s(69607),m=s(47306);function y(t){return function(){return t}}function $(t,e,s){this.target=t,this.type=e,this.selection=s}function w(){h.B.stopImmediatePropagation()}function S(){h.B.preventDefault(),h.B.stopImmediatePropagation()}var T={name:"drag"},k={name:"space"},M={name:"handle"},G={name:"center"};function _(t){return[+t[0],+t[1]]}function I(t){return[_(t[0]),_(t[1])]}function O(t){return function(e){return(0,v.Z)(e,h.B.touches,t)}}var E={name:"x",handles:["w","e"].map(V),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},D={name:"y",handles:["n","s"].map(V),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},B={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(V),input:function(t){return null==t?null:I(t)},output:function(t){return t}},C={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},A={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},z={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Z={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},P={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function V(t){return{type:t}}function j(){return!h.B.ctrlKey&&!h.B.button}function R(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function q(){return navigator.maxTouchPoints||"ontouchstart"in this}function F(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function L(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Y(t){var e,s=R,a=j,o=q,n=!0,i=(0,f.Z)("start","brush","end"),l=6;function c(e){var s=e.property("__brush",Y).selectAll(".overlay").data([V("overlay")]);s.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",C.overlay).merge(s).each((function(){var t=F(this).extent;(0,r.Z)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([V("selection")]).enter().append("rect").attr("class","selection").attr("cursor",C.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var a=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));a.exit().remove(),a.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return C[t.type]})),e.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",v).filter(o).on("touchstart.brush",v).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=(0,r.Z)(this),e=F(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-l/2:e[0][0]-l/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-l/2:e[0][1]-l/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+l:l})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+l:l}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function p(t,e,s){var a=t.__brush.emitter;return!a||s&&a.clean?new d(t,e,s):a}function d(t,e,s){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=s}function v(){if((!e||h.B.touches)&&a.apply(this,arguments)){var s,o,i,l,c,d,f,b,v,y,$,_=this,I=h.B.target.__data__.type,B="selection"===(n&&h.B.metaKey?I="overlay":I)?T:n&&h.B.altKey?G:M,V=t===D?null:Z[I],j=t===E?null:P[I],R=F(_),q=R.extent,Y=R.selection,N=q[0][0],W=q[0][1],H=q[1][0],X=q[1][1],K=0,J=0,U=V&&j&&n&&h.B.shiftKey,Q=h.B.touches?O(h.B.changedTouches[0].identifier):x.Z,tt=Q(_),et=tt,st=p(_,arguments,!0).beforestart();"overlay"===I?(Y&&(v=!0),R.selection=Y=[[s=t===D?N:tt[0],i=t===E?W:tt[1]],[c=t===D?H:s,f=t===E?X:i]]):(s=Y[0][0],i=Y[0][1],c=Y[1][0],f=Y[1][1]),o=s,l=i,d=c,b=f;var at=(0,r.Z)(_).attr("pointer-events","none"),ot=at.selectAll(".overlay").attr("cursor",C[I]);if(h.B.touches)st.moved=it,st.ended=lt;else{var nt=(0,r.Z)(h.B.view).on("mousemove.brush",it,!0).on("mouseup.brush",lt,!0);n&&nt.on("keydown.brush",ct,!0).on("keyup.brush",ut,!0),(0,g.Z)(h.B.view)}w(),(0,m.e1)(_),u.call(_),st.start()}function it(){var t=Q(_);!U||y||$||(Math.abs(t[0]-et[0])>Math.abs(t[1]-et[1])?$=!0:y=!0),et=t,v=!0,S(),rt()}function rt(){var t;switch(K=et[0]-tt[0],J=et[1]-tt[1],B){case k:case T:V&&(K=Math.max(N-s,Math.min(H-c,K)),o=s+K,d=c+K),j&&(J=Math.max(W-i,Math.min(X-f,J)),l=i+J,b=f+J);break;case M:V<0?(K=Math.max(N-s,Math.min(H-s,K)),o=s+K,d=c):V>0&&(K=Math.max(N-c,Math.min(H-c,K)),o=s,d=c+K),j<0?(J=Math.max(W-i,Math.min(X-i,J)),l=i+J,b=f):j>0&&(J=Math.max(W-f,Math.min(X-f,J)),l=i,b=f+J);break;case G:V&&(o=Math.max(N,Math.min(H,s-K*V)),d=Math.max(N,Math.min(H,c+K*V))),j&&(l=Math.max(W,Math.min(X,i-J*j)),b=Math.max(W,Math.min(X,f+J*j)))}d<o&&(V*=-1,t=s,s=c,c=t,t=o,o=d,d=t,I in A&&ot.attr("cursor",C[I=A[I]])),b<l&&(j*=-1,t=i,i=f,f=t,t=l,l=b,b=t,I in z&&ot.attr("cursor",C[I=z[I]])),R.selection&&(Y=R.selection),y&&(o=Y[0][0],d=Y[1][0]),$&&(l=Y[0][1],b=Y[1][1]),Y[0][0]===o&&Y[0][1]===l&&Y[1][0]===d&&Y[1][1]===b||(R.selection=[[o,l],[d,b]],u.call(_),st.brush())}function lt(){if(w(),h.B.touches){if(h.B.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else(0,g.D)(h.B.view,v),nt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);at.attr("pointer-events","all"),ot.attr("cursor",C.overlay),R.selection&&(Y=R.selection),L(Y)&&(R.selection=null,u.call(_)),st.end()}function ct(){switch(h.B.keyCode){case 16:U=V&&j;break;case 18:B===M&&(V&&(c=d-K*V,s=o+K*V),j&&(f=b-J*j,i=l+J*j),B=G,rt());break;case 32:B!==M&&B!==G||(V<0?c=d-K:V>0&&(s=o-K),j<0?f=b-J:j>0&&(i=l-J),B=k,ot.attr("cursor",C.selection),rt());break;default:return}S()}function ut(){switch(h.B.keyCode){case 16:U&&(y=$=U=!1,rt());break;case 18:B===G&&(V<0?c=d:V>0&&(s=o),j<0?f=b:j>0&&(i=l),B=M,rt());break;case 32:B===k&&(h.B.altKey?(V&&(c=d-K*V,s=o+K*V),j&&(f=b-J*j,i=l+J*j),B=G):(V<0?c=d:V>0&&(s=o),j<0?f=b:j>0&&(i=l),B=M),ot.attr("cursor",C[I]),rt());break;default:return}S()}}function _(){p(this,arguments).moved()}function B(){p(this,arguments).ended()}function Y(){var e=this.__brush||{selection:null};return e.extent=I(s.apply(this,arguments)),e.dim=t,e}return c.move=function(e,s){e.selection?e.on("start.brush",(function(){p(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){p(this,arguments).end()})).tween("brush",(function(){var e=this,a=e.__brush,o=p(e,arguments),n=a.selection,i=t.input("function"==typeof s?s.apply(this,arguments):s,a.extent),r=(0,b.Z)(n,i);function l(t){a.selection=1===t&&null===i?null:r(t),u.call(e),o.brush()}return null!==n&&null!==i?l:l(1)})):e.each((function(){var e=this,a=arguments,o=e.__brush,n=t.input("function"==typeof s?s.apply(e,a):s,o.extent),i=p(e,a).beforestart();(0,m.e1)(e),o.selection=null===n?null:n,u.call(e),i.start().brush().end()}))},c.clear=function(t){c.move(t,null)},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){(0,h._H)(new $(c,e,t.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},c.extent=function(t){return arguments.length?(s="function"==typeof t?t:y(I(t)),c):s},c.filter=function(t){return arguments.length?(a="function"==typeof t?t:y(!!t),c):a},c.touchable=function(t){return arguments.length?(o="function"==typeof t?t:y(!!t),c):o},c.handleSize=function(t){return arguments.length?(l=+t,c):l},c.keyModifiers=function(t){return arguments.length?(n=!!t,c):n},c.on=function(){var t=i.on.apply(i,arguments);return t===i?c:t},c}function N(){return Math.random()}(function t(e){function s(t,s){return t=null==t?0:+t,s=null==s?1:+s,1===arguments.length?(s=t,t=0):s-=t,function(){return e()*s+t}}return s.source=t,s})(N);var W=function t(e){function s(t,s){var a,o;return t=null==t?0:+t,s=null==s?1:+s,function(){var n;if(null!=a)n=a,a=null;else do{a=2*e()-1,n=2*e()-1,o=a*a+n*n}while(!o||o>1);return t+s*n*Math.sqrt(-2*Math.log(o)/o)}}return s.source=t,s}(N),H=(function t(e){function s(){var t=W.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return s.source=t,s}(N),function t(e){function s(t){return function(){for(var s=0,a=0;a<t;++a)s+=e();return s}}return s.source=t,s}(N));(function t(e){function s(t){var s=H.source(e)(t);return function(){return s()/t}}return s.source=t,s})(N),function t(e){function s(t){return function(){return-Math.log(1-e())/t}}return s.source=t,s}(N);const X=function(t){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t)},K=function(t){let e=((0,n.VR)(t,.75)-(0,n.VR)(t,.25))/1.34;return 1.06*Math.min((0,n.P3)(t),e)*Math.pow(t.length,-.2)};class J{constructor(t,e=!1,s=30,a=-40,o=100){this.id=t,this.verbose=e,this.offsetX=s,this.offsetY=a,this.duration=o}show(t){this.verbose&&console.log(t),this.edit(t),this.move(),(0,r.Z)("#"+this.id).style("display","inline").transition().duration(this.duration).style("opacity",1)}hide(){(0,r.Z)("#"+this.id).transition().duration(this.duration).style("opacity",0),this.edit("")}move(t=h.B.pageX,e=h.B.pageY){this.verbose&&(console.log(t),console.log(e)),t+=this.offsetX,e=e+this.offsetY<0?10:e+this.offsetY;(0,r.Z)("#"+this.id).style("left",`${t}px`).style("top",`${e}px`)}edit(t){(0,r.Z)("#"+this.id).html(t)}}var U=s(6939);function Q(t){for(var e="",s=document.styleSheets,a=0;a<s.length;a++)try{if(null==s[a].cssRules)continue;for(var o=s[a].cssRules,n=0;n<o.length;n++){var i=o[n];if(void 0!==i.style){var r,l=void 0===i.selectorText?i.selectorText:i.selectorText.replace(`#${t[0].id} `,"");try{r=U(t).find(l)}catch(t){r=[]}r.length>0&&(e+=i.selectorText+" { "+i.style.cssText+" }\n")}}}catch(t){if("SecurityError"!==t.name)throw t;continue}var c=document.createElement("style");return c.setAttribute("type","text/css"),c.innerHTML="<![CDATA[\n"+e+"\n]]>",c}var tt=s(6939);class et{constructor(t,e,s=!1){tt(`#${t}`).show();const a=s?"btn-group-vertical btn-group-sm":"btn-group btn-group-sm";this.bar=tt("<div/>").addClass(a).appendTo(`#${t}`),this.buttons={},this.tooltip=e}createDownloadSvgButton(t,e,s,a,o="fa-download"){this.createButton(t,o);(0,r.Z)(`#${t}`).on("click",(()=>{this.downloadSvg(e,s,a)})).on("mouseover",(()=>{this.tooltip.show("Download")})).on("mouseout",(()=>{this.tooltip.hide()}))}createResetButton(t,e,s="fa-expand-arrows-alt"){this.createButton(t,s);(0,r.Z)(`#${t}`).on("click",e).on("mouseover",(()=>{this.tooltip.show("Reset the scales")})).on("mouseout",(()=>{this.tooltip.hide()}))}createButton(t,e="fa-download"){const s=tt("<a/>").attr("id",t).addClass("btn btn-default").appendTo(this.bar);return tt("<i/>").addClass(`fa ${e}`).appendTo(s),this.buttons[t]=s,s}attachTooltip(t){this.tooltip=t}downloadSvg(t,e,s){let a=tt(tt(tt(""+("#"+t)))[0]),o=a.clone().attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg"),n=Q(a.get());o.prepend(n),tt("#"+s).html("").hide();let i=tt(`#${s}`).append(o).html(),r=new Blob([i],{type:"image/svg+xml"});saveAs(r,e),tt(`#${s}`).html("").hide()}}var st=s(6939);class at{constructor(t,e={}){this._sanityCheck(t),this.data=t,this.groupInfo=e,this.toolbar=void 0,this.tooltip=void 0}render(t,e=500,s=357,a=.05,o,i=[-3,3],l="Y axis",p=!0,h=30,f=!0,g=0,b=!1,v=!1,x=!1,m=!1,y=!1,$=!1,w=0){if(this.reset=()=>{t.selectAll("*").remove(),this.render(t,e,s,a,o,i,l,p,h,f,g,b,v,x,m,y,$)},this.updateYScale=function(n,i){t.selectAll("*").remove(),void 0===i&&(i=[]),this.render(t,e,s,a,o,[],n,p,h,f,g,b,v,x,m,y,$)},this.updateXScale=function(o){void 0===o&&console.error("updateXScale called without new X domain"),t.selectAll("*").remove(),this.render(t,e,s,a,o,[],l,p,h,f,g,b,v,x,m,y,$)},void 0===i||0==i.length){let t=[];this.data.forEach((e=>t=t.concat(e.values))),i=(0,n.We)(t)}this.groups=(0,c.b1)().key((t=>t.group)).entries(this.data),this.scale={x:(0,u.ti)().rangeRound([0,e]).domain(o||this.groups.map((t=>t.key))).paddingInner(a),subx:(0,u.ti)(),y:(0,u.BY)().rangeRound([s,0]).domain(i),z:(0,u.BY)()},this.groups.forEach((e=>{let a=e.key,o=e.values,r=this.groupInfo[a];if(e.index=this.scale.x.domain().indexOf(a),void 0!==r){t.append("g").selectAll(".violin-group-label").data(["pvalue"]).enter().append("text").attr("x",0).attr("y",0).attr("class","violin-group-label").attr("text-anchor","center").attr("fill",(t=>"pvalue"==t&&parseFloat(r[t])<=parseFloat(r.pvalueThreshold)?"orangered":"SlateGray")).attr("transform",((t,e)=>`translate(${this.scale.x(a)+this.scale.x.bandwidth()/2}, ${this.scale.y(i[0])+50})`)).text((t=>`${t}: ${parseFloat(parseFloat(r[t]).toPrecision(3)).toExponential()}`))}y&&o.sort(((t,e)=>t.label<e.label?-1:t.label>e.label?1:0)),this.scale.subx.domain(o.map((t=>t.label))).rangeRound([this.scale.x(a),this.scale.x(a)+this.scale.x.bandwidth()]),o.forEach((s=>{0!=s.values.length&&(s.values=s.values.sort(n.j2),this._drawViolin(t,s,b,e.index,$,w))}));var l=18;if(m){const e=(0,u.ti)().domain(o.map((t=>null==t.size?"(0)":`(${t.size||0})`))).rangeRound([this.scale.x(a),this.scale.x(a)+this.scale.x.bandwidth()]);t.append("g").attr("class","violin-size-axis").attr("transform",`translate(0, ${s+l})`).call((0,d.LL)(e))}if(f){l=5;const e=t.append("g").attr("class","violin-sub-axis").attr("transform",`translate(0, ${s+l})`).call((0,d.LL)(this.scale.subx));g>0&&e.selectAll("text").attr("text-anchor","start").attr("transform",`rotate(${g}, 2, 10)`)}}));let S=f?55:0;if(this.xAxis=p?(0,d.LL)(this.scale.x):(0,d.LL)(this.scale.x).tickFormat(""),t.append("g").attr("class","violin-x-axis axis--x").attr("transform",`translate(0, ${s+S})`).call(this.xAxis).selectAll("text").attr("text-anchor","start").attr("transform",`rotate(${h}, -10, 10)`),S=5,this.yAxis=(0,d.y4)(this.scale.y).tickValues(this.scale.y.ticks(5)),t.append("g").attr("class","violin-y-axis axis--y").attr("transform",`translate(-${S}, 0)`).call(this.yAxis),t.append("text").attr("class","violin-axis-label").attr("text-anchor","middle").attr("transform",`translate(-${2*S+(0,r.Z)(".violin-y-axis").node().getBBox().width}, ${this.scale.y.range()[0]+(this.scale.y.range()[1]-this.scale.y.range()[0])/2}) rotate(-90)`).text(l),t.on("mouseout",(()=>{void 0!==this.tooltip&&this.tooltip.hide()})),v&&this._addGroupDivider(t),x){const e=t.append("g").attr("id","violinLegend").attr("transform","translate(0, 0)");e.append("rect").attr("x",this.scale.x.range()[0]).attr("y",-35).attr("width",60*this.groups[0].values.length+10).attr("height",24).style("fill","none").style("stroke","silver");const s=e.selectAll(".violin-legend").data(this.groups[0].values).enter().append("g").classed("violin-legend",!0),a=10;s.append("rect").attr("x",((t,e)=>5+60*e+this.scale.x.range()[0])).attr("y",-28).attr("width",a).attr("height",a).style("fill",(t=>t.color)),s.append("text").attr("class","violin-legend-text").text((t=>t.label)).attr("x",((t,e)=>17+60*e+this.scale.x.range()[0])).attr("y",-20)}}addPlotTitle(t,e){let s=(this.scale.x.range()[1]-this.scale.x.range()[0]+1)/2,a=this.scale.y.range()[1]-10;t.append("text").attr("class","violin-title").attr("text-anchor","middle").attr("transform",`translate(${s}, ${a})`).text(e)}createTooltip(t){return 0==st(`#${t}`).length&&st("<div/>").attr("id",t).appendTo(st("body")),this.tooltip=new J(t),(0,r.Z)(`#${t}`).classed("violin-tooltip",!0),this.tooltip}createToolbar(t,e){return this.toolbar=new et(t,e),this.toolbar}addBrush(t){const e=Y(B);e.on("end",(()=>{this.zoom(t,e)})),t.append("g").attr("class","brush").call(e)}zoom(t,e){let s,a=h.B.selection;if(void 0===e)this.reset();else if(a){this.scale.x.domain(this.scale.x.domain().filter(((t,e)=>{const s=Math.floor(a[0][0]/this.scale.x.bandwidth()),o=Math.floor(a[1][0]/this.scale.x.bandwidth());return e>=s&&e<=o})));const s=Math.floor(this.scale.y.invert(a[1][1])),o=Math.floor(this.scale.y.invert(a[0][1]));this.scale.y.domain([s,o]),t.select(".brush").call(e.move,null)}else{if(!s)return s=setTimeout((function(){s=null}),350);this.reset()}let o=t.transition().duration(750);t.select(".axis--x").transition(o).call(this.xAxis),t.select(".axis--y").transition(o).call(this.yAxis),this.groups.forEach(((e,s)=>{let a=e.key,i=e.values;this.scale.subx.rangeRound([this.scale.x(a),this.scale.x(a)+this.scale.x.bandwidth()]),i.forEach((s=>{if(0==s.values.length)return;this.scale.x.domain().indexOf(a);this.scale.z.range([this.scale.subx(s.label),this.scale.subx(s.label)+this.scale.subx.bandwidth()]);const i=t.select(`#violin${e.index}-${s.label}`);i.select(".violin").transition(o).attr("d",(0,p.Z)().x0((t=>this.scale.z(t[1]))).x1((t=>this.scale.z(-t[1]))).y((t=>this.scale.y(t[0]))));const r=(0,n.VR)(s.values,.25),l=(0,n.VR)(s.values,.75),c=.1;i.select(".violin-ir").transition(o).attr("x",this.scale.z(-c)).attr("y",this.scale.y(l)).attr("width",Math.abs(this.scale.z(-c)-this.scale.z(c))).attr("height",Math.abs(this.scale.y(l)-this.scale.y(r)));const u=(0,n.C2)(s.values);i.select(".violin-median").transition(o).attr("x1",this.scale.z(-c)).attr("x2",this.scale.z(c)).attr("y1",this.scale.y(u)).attr("y2",this.scale.y(u))}))}))}_drawViolin(t,e,s,a,o,i){let r=function(t,e,s){return function(a){return e.map((e=>[e,(0,n.J6)(a,(a=>t((e-a)/s)))/s]))}}(X,this.scale.y.ticks(100),K(e.values));const l=(0,n.We)(e.values),c=r(e.values).filter((t=>t[0]>=l[0]&&t[0]<=l[1])),u=t.append("g").attr("id",`violin${a}-${e.label}`).attr("class","violin-g").datum(e);if(e.values.length>=i&&c.length&&this._validVertices(c)){let i=(0,n.Fp)(c,(t=>Math.abs(t[1])));this.scale.z.domain([-i,i]).range([this.scale.subx(e.label),this.scale.subx(e.label)+this.scale.subx.bandwidth()]);let r=(0,p.Z)().x0((t=>this.scale.z(t[1]))).x1((t=>this.scale.z(-t[1]))).y((t=>this.scale.y(t[0])));const l=u.append("path").datum(c).attr("d",r).classed("violin",!0).style("fill",(()=>void 0!==e.color?e.color:a%2==0?"#90c1c1":"#94a8b8")),d=(0,n.VR)(e.values,.25),h=(0,n.VR)(e.values,.75),f=this.scale.z.domain()[1]/3;if(s){const s=Math.abs(h-d),a=(0,n.Fp)(e.values.filter((t=>t<=h+1.5*s))),o=(0,n.VV)(e.values.filter((t=>t>=d-1.5*s)));t.append("line").classed("whisker",!0).attr("x1",this.scale.z(0)).attr("x2",this.scale.z(0)).attr("y1",this.scale.y(a)).attr("y2",this.scale.y(o)).style("stroke","#fff")}u.append("rect").attr("x",this.scale.z(-f)).attr("y",this.scale.y(h)).attr("width",Math.abs(this.scale.z(-f)-this.scale.z(f))).attr("height",Math.abs(this.scale.y(h)-this.scale.y(d))).attr("class","violin-ir");const g=(0,n.C2)(e.values);if(u.append("line").attr("x1",this.scale.z(-f)).attr("x2",this.scale.z(f)).attr("y1",this.scale.y(g)).attr("y2",this.scale.y(g)).attr("class","violin-median"),o){let t=W(0,f/2);const s=Math.abs(h-d),a=(0,n.Fp)(e.values.filter((t=>t<=h+1.5*s))),o=(0,n.VV)(e.values.filter((t=>t>=d-1.5*s))),i=e.values.filter((t=>t<o||t>a));u.append("g").attr("class","violin-outliers").selectAll("circle").data(i).enter().append("circle").attr("cx",(()=>this.scale.z(t()))).attr("cy",(t=>this.scale.y(t))).attr("r",2)}u.on("mouseover",(()=>{l.classed("highlighted",!0),void 0===this.tooltip?console.warn("GroupViolin Warning: tooltip not defined"):this.tooltip.show(e.group+"<br/>"+e.label+"<br/>Median: "+g.toPrecision(4)+"<br/>")})),u.on("mouseout",(()=>{l.classed("highlighted",!1)}))}else if(i){let t=(0,n.Fp)(e.values,(t=>Math.abs(t)));this.scale.z.domain([-t,t]).range([this.scale.subx(e.label),this.scale.subx(e.label)+this.scale.subx.bandwidth()]);const s=this.scale.z.domain()[1]/3;let a=W(0,s/2);u.append("g").attr("class","violin-points").selectAll("circle").data(e.values).enter().append("circle").attr("cx",(()=>this.scale.z(a()))).attr("cy",(t=>this.scale.y(t))).attr("r",2)}}_sanityCheck(t){const e=["group","label","values"];t.forEach((t=>{e.forEach((e=>{if(void 0===t[e])throw"GroupedViolin: input data error."}))}))}_addGroupDivider(t){const e=this.scale.x.domain(),s=Math.abs(this.scale.x(this.scale.x.domain()[1])-this.scale.x(this.scale.x.domain()[0])-this.scale.x.bandwidth()),a=(t,a)=>a!==e.length-1?this.scale.x(t)+ +this.scale.x.bandwidth()+s/2:0;t.selectAll(".vline").data(e).enter().append("line").classed("vline",!0).attr("x1",a).attr("x2",a).attr("y1",this.scale.y.range()[0]).attr("y2",this.scale.y.range()[1]).style("stroke-width",((t,s)=>s!=e.length-1?1:0)).style("stroke","rgb(86,98,107)").style("opacity",.5)}_validVertices(t){return!t.reduce(((t,e)=>t.concat(e)),[]).filter((t=>isNaN(t))).length}}var ot=s(6939);function nt(t,e,s,a="Gene Expression Violin Plot",c=function(){const t="https://gtexportal.org/rest/v1/";return{singleTissueEqtl:t+"association/singleTissueEqtl?format=json&datasetId=gtex_v7&gencodeId=",ld:t+"dataset/ld?format=json&datasetId=gtex_v7&gencodeId=",dyneqtl:t+"association/dyneqtl",snp:t+"reference/variant?format=json&snpId=",variantId:t+"dataset/variant?format=json&variantId=",exonExp:t+"expression/medianExonExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcriptExp:t+"expression/medianTranscriptExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",junctionExp:t+"expression/medianJunctionExpression?datasetId=gtex_v7&hcluster=true&gencodeId=",transcript:t+"reference/transcript?datasetId=gtex_v7&gencodeId=",exon:t+"reference/exon?datasetId=gtex_v7&gencodeId=",geneModel:t+"dataset/collapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneModelUnfiltered:t+"dataset/fullCollapsedGeneModelExon?datasetId=gtex_v7&gencodeId=",geneExp:t+"expression/geneExpression?datasetId=gtex_v7&gencodeId=",medGeneExp:t+"expression/medianGeneExpression?datasetId=gtex_v7&hcluster=true&pageSize=10000",geneExpBoxplot:t+"expression/geneExpression?datasetId=gtex_v7&boxplotDetail=full&gencodeId=",topInTissueFiltered:t+"expression/topExpressedGene?datasetId=gtex_v7&filterMtGene=true&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",topInTissue:t+"expression/topExpressedGene?datasetId=gtex_v7&sortBy=median&sortDirection=desc&pageSize=50&tissueSiteDetailId=",geneId:t+"reference/gene?format=json&gencodeVersion=v19&genomeBuild=GRCh37%2Fhg19&geneId=",tissue:t+"dataset/tissueInfo?format=json&datasetId=gtex_v7",sample:"tmpSummaryData/gtex.Sample.csv",rnaseqCram:"tmpSummaryData/rnaseq_cram_files_v7_dbGaP_011516.txt",wgsCram:"tmpSummaryData/wgs_cram_files_v7_hg38_dbGaP_011516.txt",fcBilling:"https://api.firecloud.org/api/profile/billing",fcWorkSpace:"https://api.firecloud.org/api/workspaces",fcPortalWorkSpace:"https://portal.firecloud.org/#workspaces"}}(),u=it(50,75,250,60),p={w:.8*window.innerWidth,h:250}){const d=[o(c.tissue,{credentials:"include"}),o(c.geneExp+s,{credentials:"include"}),o(c.geneExp+s+"&attributeSubset=sex",{credentials:"include"})],h={root:t,spinner:"spinner",svg:`${t}-svg`,tooltip:e,toolbar:`${t}-toolbar`,clone:`${t}-svg-clone`,buttons:{download:`${t}-download`,plotOptions:`${t}-option-modal`,filter:`${t}-filter`,ascAlphaSort:`${t}-asc-alphasort`,descAlphaSort:`${t}-desc-alphasort`,ascSort:`${t}-asc-sort`,descSort:`${t}-desc-sort`,logScale:`${t}-log-scale`,linearScale:`${t}-linear-scale`,noDiff:`${t}-no-diff`,sexDiff:`${t}-sex-diff`,outliersOn:`${t}-outliers-on`,outliersOff:`${t}-outliers-off`},plotOptionGroups:{scale:`${t}-option-scale`,sort:`${t}-option-sort`,differentiation:`${t}-option-differentiation`,outliers:`${t}-option-outlier`},plotSorts:{ascAlphaSort:"asc-alphasort",descAlphaSort:"desc-alphasort",ascSort:"asc-sort",descSort:"desc-sort"},tissueFilter:`${t}-filter-modal`};if(0==ot(`#${h.root}`).length)throw"Violin Plot Error: rootId does not exist.";0==ot(`#${h.tooltip}`).length&&ot("<div/>").attr("id",h.tooltip).appendTo(ot("body")),0==ot(`#${h.toolbar}`).length&&ot("<div/>").attr("id",h.toolbar).appendTo(ot(`#${h.root}`)),0==ot(`#${h.root} #${h.spinner}`).length?ot('<span><i id="spinner" class="fas fa-sync fa-spin"></i></span>').appendTo(ot(`#${h.root}`)):ot(`#${h.root} #${h.spinner}`).show(),0==ot(`#${h.clone}`).length&&ot("<div/>").attr("id",h.clone).appendTo(ot(`#${h.root}`)),Promise.all(d).then((function(t){const e=function(t){const e="tissueInfo";if(!t.hasOwnProperty(e))throw"Parsing Error: required json attr is missing: "+e;const s=t[e];return["tissueSiteDetailId","tissueSiteDetail","colorHex"].forEach((t=>{if(!s[0].hasOwnProperty(t))throw"Parsing Error: required json attr is missing: "+t})),s}(t[0]),o={},c={},d={female:"#e67f7b",male:"#70bcd2"};e.forEach((t=>{c[t.tissueSiteDetailId]=t.tissueSiteDetail,o[t.tissueSiteDetail]=t,d[t.tissueSiteDetailId]=t.colorHex}));const f=lt(t[1],c,d,!1);if(!f.length)return ot(`#${h.toolbar}`).remove(),ot(`<div id="gene-exp-vplot">No gene expression data found for ${s}</div>`).appendTo(`#${h.root}`),void ot(`#${h.root} #${h.spinner}`).hide();let g=new at(f),b=g.createTooltip(h.tooltip);g.sortData=g.data.map((t=>t)),g.allData=g.data.map((t=>t)),g.gencodeId=s,g.tIdNameMap=c,g.groupColorDict=d,g.tissueDict=o,g.geneJson={allData:t[1],subsetData:t[2]},g.unit=f.length>0?` ${f[0].unit}`:"",g.gpConfig={subset:!1,scale:"linear",sort:h.plotSorts.ascAlphaSort,showOutliers:!0,title:a},function(t,e,s,a){const o=e,n=function(t=1200,e=250,s=it()){return{width:t,height:e,outerWidth:t+(s.left+s.right),outerHeight:e+(s.top+s.bottom)}}(s.w,s.h,o),i=(0,r.Z)(`#${a.root}`).append("svg").attr("id",a.svg).attr("width",n.outerWidth).attr("height",n.outerHeight).append("g").attr("transform",`translate(${o.left}, ${o.top})`),l=n.width,c=n.height,u=.2,p=dt(t.gpConfig.sort,t.sortData,a),d=[],h="TPM",f=!0,g=35,b=!1,v=0,x=!1,m=!1,y=!0,$=!1,w=!0,S=!0;t.render(i,l,c,u,p,d,h,f,g,b,v,x,m,y,$,w,S),ut(t,a)}(g,u,p,h),function(t,e,s,a){const o=function(t,e=!1){const s=["Bladder","Cervix_Ectocervix","Cervix_Endocervix","Fallopian_Tube","Kidney_Cortex"],a="tissueInfo";if(!t.hasOwnProperty(a))throw"Parsing Error: required json attribute is missing: "+a;let o=t[a];["tissueSite","tissueSiteDetailId","tissueSiteDetail"].forEach((t=>{if(!o[0].hasOwnProperty(t))throw`parseTissueSites attr error. ${t} is not found`})),o=0==e?o:o.filter((t=>!s.includes(t.tissueSiteDetailId)));let n=o.reduce(((t,e)=>{let s=e.tissueSite,a={id:e.tissueSiteDetailId,name:e.tissueSiteDetail};return t.hasOwnProperty(s)||(t[s]=[]),t[s].push(a),t}),{});return Object.keys(n).forEach((t=>{if(1==n[t].length){let e=n[t][0];delete n[t],n[e.name]=[e]}})),n}(a);(function(t,e,s=!1,a=!1,o=4){const i="tissue-group-main-level";(0,r.Z)(`#${e}`).selectAll("*").remove();const c=l("<div/>").attr("class","col-xs-12 col-md-12").appendTo(l(`#${e}`));s?l(`<label class=${i}><input type="radio" name="allTissues" value="reset"> Reset </label><br/>`).appendTo(c):l(`<label class=${i}><input type="radio" name="allTissues" value="all"> All </label> <label class=${i}><input type="radio" name="allTissues" value="reset"> Reset </label><br/>`).appendTo(c),l('input[name="allTissues"]').change((function(){switch(l(this).val()){case"all":l(".tissueGroup").prop("checked",!0),l(".tissueSubGroup").prop("checked",!0);break;case"reset":l(".tissueGroup").prop("checked",!1),l(".tissueSubGroup").prop("checked",!1)}}));let u=Object.keys(t).sort(((t,e)=>"Brain"==t?-1:"Brain"==e?1:t<e?-1:t>e?1:void 0)),p=Object.keys(t).reduce(((e,s)=>t[s].length>1?e+1+t[s].length:e+t[s].length),0),d=Math.ceil(p/o),h=p%o,f=Math.floor(12/o);const g=(0,n.w6)(0,o).map((t=>l(`<div id="section${t}" class="col-xs-12 col-md-${f}">`).appendTo(l(`#${e}`))));let b=0,v=0;u.forEach((e=>{let s=t[e];const a=e.replace(/ /g,"_");let o=s.length;o=1==o?o:o+1,0!=b&&o+b>d+h&&(b=0,v+=1),b+=o;let n=g[v];l(`<label class=${i}><input type="checkbox" id="${a}" class="tissueGroup"> <span>${e}</span></label><br/>`).appendTo(n),s.length>1&&s.sort(((t,e)=>t.id>e.id?1:t.id<e.id?-1:0)).forEach((function(t,e){let a=l(`<label class=tissue-group-sub-level><input type="checkbox" id="${t.id}" class="tissueSubGroup"> <span>${t.name}</span></label><br/>`).appendTo(n);e==s.length-1&&a.addClass("last-site"),a.click((function(){l('input[name="allTissues"]').prop("checked",!1)}))})),l("#"+a).click((function(){l('input[name="allTissues"]').prop("checked",!1),l("#"+a).is(":checked")?s.forEach((function(t){"id"!=t.id&&l("#"+t.id).prop("checked",!0)})):s.forEach((function(t){"id"!=t.id&&l("#"+t.id).prop("checked",!1)}))}))})),a&&(l('input[name="allTissues"][value="all"]').prop("checked",!0),l(".tissueGroup").prop("checked",!0),l(".tissueSubGroup").prop("checked",!0))})(o,`${e}-body`,!1,!0,3),function(t,e,s,a){ot(`#${e}`).on("hidden.bs.modal",(o=>{let n=function(t,e,s=!1){let a=[];return l(`#${e}`).find(":input").each((function(){if(l(this).is(":checked")){const e=l(this).attr("id");if(l(this).hasClass("tissueGroup")){let o=e.replace(/_/g," ");1==t[o].length&&(s?a.push(t[o][0].name):a.push(t[o][0].id))}else s?a.push(l(l(this).siblings()[0]).text()):a.push(e)}})),a.filter((t=>void 0!==t))}(a,`${e}-body`,!0);!function(t,e,s){let a=t.allData.filter((t=>s.includes(t.group)));t.data=a,ht(t,e)}(t,s,n)}))}(t,e,s,o)}(g,h.tissueFilter,h,t[0]),function(t,e,s,a){let o=t.createToolbar(s.toolbar,e);o.createDownloadSvgButton(s.buttons.download,s.svg,"gene-exp-plot.svg",s.clone),ot(`#${s.toolbar}`).addClass("row"),ot(`#${s.toolbar} .btn-group`).addClass("col-xs-12 col-lg-1 text-nowrap").css("display","flex"),ot("<div></div>").appendTo(`#${s.toolbar}`).attr("id",`${s.toolbar}-plot-options`).attr("class","col-lg-11 text-nowrap");let n=ot(`#${s.toolbar}-plot-options`);ot("<div/>").appendTo(n).attr("id",s.plotOptionGroups.differentiation).attr("class","col-lg-2 col-xl-2"),ot("<span/>").appendTo(`#${s.plotOptionGroups.differentiation}`).attr("class",`${s.root}-option-label`).html("Subset"),ot("<div/>").appendTo(`#${s.plotOptionGroups.differentiation}`).attr("class","btn-group btn-group-sm");let l=ot(`#${s.plotOptionGroups.differentiation} .btn-group`);ot(`<button class="btn btn-default" id="${s.buttons.noDiff}">None</button>`).appendTo(l),ot(`<button class="btn btn-default" id="${s.buttons.sexDiff}">Sex</button>`).appendTo(l),ot("<div/>").appendTo(n).attr("id",s.plotOptionGroups.scale).attr("class","col-lg-2 col-xl-2"),ot("<span/>").appendTo(`#${s.plotOptionGroups.scale}`).attr("class",`${s.root}-option-label`).html("Scale"),ot("<div/>").appendTo(`#${s.plotOptionGroups.scale}`).attr("class","btn-group btn-group-sm");let c=ot(`#${s.plotOptionGroups.scale} .btn-group`);ot(`<button class="btn btn-default" id="${s.buttons.logScale}">Log</button>`).appendTo(c),ot(`<button class="btn btn-default" id="${s.buttons.linearScale}">Linear</button>`).appendTo(c),ot("<div/>").appendTo(n).attr("class",`${s.plotOptionGroups.sort} col-lg-2 col-xl-2`).attr("id","vplot-alpha-sorts"),ot("<span/>").appendTo(`.${s.plotOptionGroups.sort}#vplot-alpha-sorts`).attr("class",`${s.root}-option-label`).html("Tissue Sort"),ot("<div/>").appendTo(`.${s.plotOptionGroups.sort}#vplot-alpha-sorts`).attr("class","btn-group btn-group-sm").attr("id",`${s.plotOptionGroups.sort}-alpha`);let u=ot(`#${s.plotOptionGroups.sort}-alpha.btn-group`);ot(`<button class="btn btn-default fa fa-caret-up" id="${s.buttons.ascAlphaSort}"></button>`).appendTo(u),ot(`<button class="btn btn-default fa fa-caret-down" id="${s.buttons.descAlphaSort}"></button>`).appendTo(u),ot("<div/>").appendTo(n).attr("class",`${s.plotOptionGroups.sort} col-lg-2 col-xl-2`).attr("id","vplot-num-sorts"),ot("<span/>").appendTo(`.${s.plotOptionGroups.sort}#vplot-num-sorts`).attr("class",`${s.root}-option-label`).html("Median Sort"),ot("<div/>").appendTo(`.${s.plotOptionGroups.sort}#vplot-num-sorts`).attr("class","btn-group btn-group-sm").attr("id",`${s.plotOptionGroups.sort}-num`);let p=ot(`#${s.plotOptionGroups.sort}-num.btn-group`);ot(`<button class="btn btn-default fa fa-caret-up" id="${s.buttons.ascSort}"></button>`).appendTo(p),ot(`<button class="btn btn-default fa fa-caret-down" id="${s.buttons.descSort}"></button>`).appendTo(p),ot("<div/>").appendTo(n).attr("id",s.plotOptionGroups.outliers).attr("class","col-lg-2 col-xl-2"),ot("<span/>").appendTo(`#${s.plotOptionGroups.outliers}`).attr("class",`${s.root}-option-label`).html("Outliers"),ot("<div/>").appendTo(`#${s.plotOptionGroups.outliers}`).attr("class","btn-group btn-group-sm");let d=ot(`#${s.plotOptionGroups.outliers} .btn-group`);ot(`<button class="btn btn-default" id="${s.buttons.outliersOn}">On</button>`).appendTo(d),ot(`<button class="btn btn-default" id="${s.buttons.outliersOff}">Off</button>`).appendTo(d),(0,i.Z)(`#${s.plotOptionsModal} .modal-body button`).classed("active",!1),(0,i.Z)(`#${s.buttons.ascAlphaSort},\n               #${s.buttons.linearScale},\n               #${s.buttons.noDiff},\n               #${s.buttons.outliersOn}`).classed("active",!0),o.createButton(s.buttons.filter,"fa-filter"),(0,r.Z)(`#${s.buttons.filter}`).on("mouseover",(()=>{o.tooltip.show("Filter Tissues")})).on("mouseout",(()=>{o.tooltip.hide()})).on("click",((t,e,s)=>{ot("#gene-expr-vplot-filter-modal").modal("show")})),ot(`.${s.plotOptionGroups.sort} button`).on("click",(function(e){let a=(0,r.Z)(this);a.classed("active")||((0,i.Z)(`.${s.plotOptionGroups.sort} button`).classed("active",!1),a.classed("active",!0),t.gpConfig.sort=e.target.id.replace(`${s.root}-`,""),ht(t,s))})),ot(`#${s.plotOptionGroups.scale} button`).on("click",(function(e){let a=(0,r.Z)(this);a.classed("active")||((0,i.Z)(`#${s.plotOptionGroups.scale} button`).classed("active",!1),a.classed("active",!0),t.gpConfig.scale=e.target.id==s.buttons.logScale?"log":"linear",ht(t,s))})),ot(`#${s.plotOptionGroups.outliers} button`).on("click",(function(e){let a=(0,r.Z)(this);a.classed("active")||((0,i.Z)(`#${s.plotOptionGroups.outliers} button`).classed("active",!1),a.classed("active",!0),t.gpConfig.showOutliers=e.target.id==s.buttons.outliersOn,pt(t,s))})),ot(`#${s.plotOptionGroups.differentiation} button`).on("click",(function(e){let a=(0,r.Z)(this);a.classed("active")||((0,i.Z)(`#${s.plotOptionGroups.differentiation} button`).classed("active",!1),a.classed("active",!0),t.gpConfig.subset=e.target.id==s.buttons.sexDiff,ht(t,s))}))}(g,b,h),ot(`#${h.root} #${h.spinner}`).hide()}))}function it(t=50,e=50,s=50,a=50){return{top:t,right:e,bottom:s,left:a}}function rt(t,e=!0){t.forEach((t=>{t.values=e?t.data.map((t=>Math.log10(+t+1))):t.data,t.values.sort(n.j2),t.median=(0,n.C2)(t.values)}))}function lt(t,e,s,a=!0){const o="geneExpression";if(!t.hasOwnProperty(o))throw"Parse Error: required json attribute is missing: "+o;return t[o].forEach((t=>{["data","tissueSiteDetailId","geneSymbol","gencodeId"].forEach((e=>{if(!t.hasOwnProperty(e))throw console.error(t),"Parse Error: required json attribute is missing: "+e})),t.group=void 0===e?t.tissueSiteDetailId:e[t.tissueSiteDetailId],t.label=void 0===t.subsetGroup?t.geneSymbol:t.subsetGroup,t.color=void 0===s?"#90c1c1":void 0===t.subsetGroup?`#${s[t.tissueSiteDetailId]}`:s[t.subsetGroup]})),rt(t[o],a),t[o]}function ct(t){const e=t.select(".violin-x-axis");e.attr("transform",`${e.attr("transform")} translate(0, 3)`)}function ut(t,e){let s=(0,r.Z)(`#${e.svg} g`);void 0!==t.gpConfig.title&&t.addPlotTitle(s,t.gpConfig.title),pt(t,e),t.gpConfig.subset?function(t,e,s,a="top"){ct(e);const o=e.selectAll(".violin-x-axis text");o.attr("transform",`translate(0, 8) ${o.attr("transform")}`),e.append("g").selectAll(".tcolor").data(t.scale.x.domain()).enter().append("rect").classed("tcolor",!0).attr("x",(e=>t.scale.x(e))).attr("y",(e=>"top"==a?t.scale.y.range()[1]:t.scale.y.range()[0])).attr("transform","translate(0, 14)").attr("width",(e=>t.scale.x.bandwidth())).attr("height",5).style("stroke-width",0).style("fill",(t=>`#${s[t].colorHex}`)).style("opacity",.9)}(t,s,t.tissueDict,"bottom"):((0,r.Z)(`#${e.svg} #violinLegend`).remove(),ct(s)),function(t){(0,i.Z)(".violin-g").on("mouseover",((e,s,a)=>{let o="log"==t.gpConfig.scale?Math.pow(10,e.median)-1:e.median;(0,r.Z)(a[s]).select("path").classed("highlighted",!0),t.gpConfig.subset?t.tooltip.show(e.group+"<br/>"+e.label+` (n = ${e.values.length})<br/>`+`Median${t.unit}: ${o.toPrecision(4)}<br/>`):t.tooltip.show(e.group+"<br/>"+`n = ${e.values.length}<br/>`+`Median${t.unit}: ${o.toPrecision(4)}<br/>`)}))}(t)}function pt(t,e){(0,i.Z)(`#${e.svg} path.violin`).classed("outlined",!t.gpConfig.showOutliers),ot(`#${e.svg} .violin-outliers`).toggle(t.gpConfig.showOutliers)}function dt(t,e,s){switch(t){case s.plotSorts.ascAlphaSort:e.sort(((t,e)=>t.group<e.group?-1:t.group>e.group?1:0));break;case s.plotSorts.descAlphaSort:e.sort(((t,e)=>t.group<e.group?1:t.group>e.group?-1:0));break;case s.plotSorts.ascSort:e.sort(((t,e)=>t.median-e.median));break;case s.plotSorts.descSort:e.sort(((t,e)=>e.median-t.median))}return e.map((t=>t.group))}function ht(t,e){let s=t.gpConfig.subset?t.geneJson.subsetData:t.geneJson.allData;const a="log"==t.gpConfig.scale?lt(s,t.tIdNameMap,t.groupColorDict):lt(s,t.tIdNameMap,t.groupColorDict,!1);let o=t.data.map((t=>t.group));t.allData=a.map((t=>t)),t.data=a.filter((t=>-1!=o.indexOf(t.group)));let n=t.sortData.filter((t=>o.includes(t.group))),i=dt(t.gpConfig.sort,n,e);rt(t.data,"log"==t.gpConfig.scale),rt(t.allData,"log"==t.gpConfig.scale);let r="log"==t.gpConfig.scale?"log10(TPM+1)":"TPM";t.updateXScale(i),t.updateYScale(r),ut(t,e)}}}]);